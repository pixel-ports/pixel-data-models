{
   "$schema":"http://json-schema.org/schema#",
   "$id":"https://gitpixel.satrdlab.upv.es/marc.despland/DataModels/src/master/DataModels/Pixel/KPI/EnvironmentalKeyPerformanceIndicator/schema.json",
   "title":"Adaptation of the FIWARE - KPI / KeyPerformanceIndicator  data model for the purpose of PIXEL project",
   "description":"EnvironmentalKeyPerformanceIndicator",
   "type":"object",
   "allOf":[
      {
         "properties":{
            "type":{
               "type":"string",
               "enum":[
                  "EnvironmentalKeyPerformanceIndicator"
               ],
               "description":"NGSI Entity type"
            },
            "location": {
               "$ref": "http://geojson.org/schema/Geometry.json#",
               "description": "The geo:json location of the data"
            },
            "source":{
               "type":"string",
               "description":"The ID of the PIXEL data source"
            },
            "name":{
               "type":"string"
            },
            "description":{
               "type":"string"
            },
            "category":{
               "type":"array",
               "items":{
                  "type":"string"
               }
            },
            "organization":{
               "type":"object",
               "properties":{
                  "name":{
                     "type":"string"
                  }
               }
            },
            "process":{
               "type":"string"
            },
            "calculationFrequency":{
               "type":"string"
            },
            "calculationMethod":{
               "type":"string"
            },            
            "dateObservedFrom":{
               "type":"string",
               "format":"date-time"
            },
            "dateObservedTo":{
               "type":"string",
               "format":"date-time"
            },
            "kpiValue":{
               "type":"number"
            },
            "dateNextCalculation":{
               "type":"string",
               "format":"date-time"
            },
            "dateModified":{
               "type":"string",
               "format":"date-time"
            },
            "peicategory":{
               "type":"string"
            },
            "peilevel":{
               "type":"string"
            },
            "sourcePort":{
               "type":"string"
            },
            "unit":{
               "type":"string"
            },
            "dataPieces":{
               "type":"array",
               "items":{
                  "type":"object",
                  "properties":{
                     "name":{
                        "type":"string"
                     },
                     "retrievalWay":{
                        "type":"string"
                     }
                  }
               }
            }
         }
      }
   ],
   "required":[
      "id",
      "type",
      "name",
      "category",
      "calculationFrequency",
      "calculationMethod",
      "calculationPeriod",
      "kpiValue",
      "dateNextCalculation",
      "dateModified",
      "source",
      "peicategory",
      "peilevel",
      "sourcePort",
      "unit",
      "dataPieces"
   ]
}